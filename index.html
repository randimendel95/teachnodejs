<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Teaching node.js</title>
	<script src="https://code.jquery.com/jquery.min.js"></script>
	<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
	<link rel="stylesheet" type="text/css" href="css/main.css">
</head>

<body class="container">
	<div class="header">
		<h1 class="pageTitle">An Introduction to Server Side Web Development</h1>
		<img class="nodeImg" src="data:image/png;base64,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"></img>
		
	</div>
	<!--Teahing user to make a basic server, that does nothing with node.js-->
	<div>
		<h2>Create a basic http server</h2>
		<p>First off, we start by using the HTTP server</p>
		<p>In the file called "server.js", make an HTTP request to use the HTTP server with</p>
		<pre class="well well-md">
			<code class="startserver">
	var http = require("http");
			</code>
		</pre>
		<p>Once you have requested http, you have to create the server, and listen to it on a local host (eg. 8888) with </p>
		<pre class="well well-md">
			<code class="startserver">
	var server = http.createServer();
	server.listen(8888);
			</code>
		</pre>
		<p>This will start your file, and listen for commands on the local server 8888.  However, since we haven't made any requests yet, this command doesn't do anything.</p>
		<button type="button" class="btn btn-info btn-lg" data-toggle="modal" data-target="#myModal">View Code</button>

		<!-- Modal -->
		<div id="myModal" class="modal fade" role="dialog">
		  <div class="modal-dialog">

		    <!-- Modal content-->
		    <div class="modal-content">
		      <div class="modal-header">
		        <button type="button" class="close" data-dismiss="modal">&times;</button>
		        <h4 class="modal-title">Running empty HTTP Server</h4>
		      </div>
		      <div class="modal-body">
		<pre class="well well-md">
			<code class="startserver">
	var http = require("http");

	var server = http.createServer();
	server.listen(8888);
			</code>
		</pre>
		      </div>
		      <div class="modal-footer">
		        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
		      </div>
		    </div>

		  </div>
		</div>

		
	</div>

	<!--Writes onto the server using the response-->
	<div>
		<h2>Writing to the server</h2>
		<p>Now that we have a server running, we can add a function into the server, so that it will actually do something!  In our createServer() function, we now needs parameters for a request and a response.</p>
		<p>The <b>response</b> is what appears on our local server.</p>
		<p>Write to the response with the following </p>
		<pre class="well well-md">
			<code class="basichttp">
	response.writeHead(200, {"Content-Type": "text/plain"});
	response.write();
			</code>
		</pre>
		<p>Whatever you write inside the write() method will be written on the server.</p>
		<p>Now try adding to your "server.js" method by writing something to the page.  Now when you run the server with </p>
		<pre class="well well-md">
			<code class="basichttp">
	node server.js
			</code>
		</pre>
		<p>You should get that text on your localhost</p>

		<!-- Trigger the modal with a button -->
		<button type="button" class="btn btn-info btn-lg" data-toggle="modal" data-target="#myModal2">View the Code</button>

		<!-- Modal -->
		<div id="myModal2" class="modal fade" role="dialog">
		  <div class="modal-dialog">

		    <!-- Modal content-->
		    <div class="modal-content">
		      <div class="modal-header">
		        <button type="button" class="close" data-dismiss="modal">&times;</button>
		        <h4 class="modal-title">Running on a local Server</h4>
		      </div>
		      <div class="modal-body">
		<pre class="well well-md">
			<code class="basichttp">
	var http = require("http");

	http.createServer(function(request, response) {
	  	response.writeHead(200, {"Content-Type": "text/plain"});
	  	response.write("This will be posted on your server");
		response.end();
	}).listen(8888);
			</code>
		</pre>
		      </div>
		      <div class="modal-footer">
		        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
		      </div>
		    </div>

		  </div>
		</div>


		<p>Now you are running an http server on your local host (8888).</p>
		<p>Now if you go to localhost:8888, it should be running your server, and writing whatever you put in the function response.write()!</p>
	</div>

	
	<!--Next we are showing the order of events and how asynchronous calls work-->
	<div>
		<h2>Asynchronous Calls with Node.js</h2>
		<p>This next section will show the order that node.js is processing requests</p>
		<p>We will do that by printing to the console with console.log()</p>
		<p>First, we will put our actions into a function, and call it onRequest.  This should do the same thing as the function within createServer, but lets simplify by making it a unique function.  </p>
		<pre class="well well-md">
			<code>
	function onRequest(request, response) {
	  	response.writeHead(200, {"Content-Type": "text/plain"});
	  	response.write("This will be posted on your server");
		response.end();
	})
			</code>
		</pre>

		<p>Add console notes to your server.js file, at the beginning of your function when the request is made, and after server begins running. </p>
		<!-- Trigger the modal with a button -->
		<button type="button" class="btn btn-info btn-lg" data-toggle="modal" data-target="#myModal3">View Code</button>

		<!-- Modal -->
		<div id="myModal3" class="modal fade" role="dialog">
		  <div class="modal-dialog">
		    <!-- Modal content-->
		    <div class="modal-content">
		      <div class="modal-header">
		        <button type="button" class="close" data-dismiss="modal">&times;</button>
		        <h4 class="modal-title">See Asynchronous Order</h4>
		      </div>
		      <div class="modal-body">
		<pre class="well well-md">
			<code class="async">
	var http = require("http");
	function onRequest(request, response) {
		console.log("Request received.");
	  	response.writeHead(200, {"Content-Type": "text/plain"});
	  	response.write("This will be posted on your server");
	  	response.end();
	}
	http.createServer(onRequest).listen(8888);
	console.log("Server has started.");
			</code>
		</pre>
		      </div>
		      <div class="modal-footer">
		        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
		      </div>
		    </div>

		  </div>
		</div>


		
		<p>The expected order in the console based on how we've been running the server in this class would be : "Request received." in the console, followed by the request being written to the server, then finally "Server has started." in the console.  However, due to asynchronous calling, when the funcion is called, first the action is thrown into the event loop, then the server is started, and "Server has started." is shown on the console, then as node.js goes through the events, the request is received and then posted on the server.</p>

	<!--This next section shows how to use a router seperately-->
	<div>
		<h2>Routers</h2>
		<p>We can make the server.js file take care of the server, but run the calls on our index.js file.  In our index.js file, all we need is to verify that there is a server through the require function, and then call for action on that server.  We do this with the code:
		<pre class="well well-md">
			<code>
	var server = require("./server");
	server.start();
			</code>
		</pre>
		<p>This will call a function start() from the server file.  Our server should now look like this:
		<pre class="well well-md">
			<code>
	var http = require("http");

	function start() {
		function onRequest(request, response) {
	    	console.log("Request received.");
	    	response.writeHead(200, {"Content-Type": "text/plain"});
	    	response.write("Hello World");
	    	response.end();
	  	}
	  	http.createServer(onRequest).listen(8888);
	  	console.log("Server has started.");
	}
	exports.start = start;
			</code>
		</pre>
		<p>This calls our request function when start is called.  First it puts the onRequest function in the action loop, then outside of the onRequest function, it starts the server, then executes the action.  "exports.start = start" creates an empty object "exports" then sets it to the return of the start function. </p>  		
	</div>

	</body>
</html>

